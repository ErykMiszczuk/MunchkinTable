import{d as p,r as v,a as g,o as i,c as u,b as r,t as l,e as c,f as y,u as a,g as h,h as w,F as b,i as x,j as P}from"./index.dfba8583.js";const $={class:"counter"},B={class:"counter__title"},D={class:"counter__value"},f=p({__name:"Counter",props:{title:String,startingValue:{required:!1,default:0,type:Number}},emits:["increment","decrement"],setup(o,{emit:e}){const t=v(Number(o.startingValue));function s(){t.value++,e("increment",t.value)}function _(){t.value--,e("decrement",t.value)}return(d,J)=>{const m=g("font-awesome-icon");return i(),u("div",$,[r("div",B,l(o.title),1),r("button",{class:"counter__button--increment",onClick:s},[c(m,{icon:"fa-solid fa-plus"})]),r("div",D,l(t.value),1),r("button",{class:"counter__button--decrement",onClick:_},[c(m,{icon:"fa-solid fa-minus"})])])}}});const L={class:"full-power"},k=r("p",{class:"full-power__title"},"Full Power",-1),z={class:"full-power__value"},S=p({__name:"FullPower",props:{fullPower:{required:!0,default:0,type:Number}},setup(o){const e=o;return(n,t)=>(i(),u("div",L,[k,r("span",z,l(e.fullPower),1)]))}});function C(o){try{return[o(),null]}catch(e){return[null,e]}}const F={class:"player"},N={class:"player__name"},I={class:"player__stats"},H={class:"stats--full-power"},V={class:"stats--hero-level"},E={class:"stats--items-power"},M=p({__name:"Player",props:{playerData:null},setup(o){const e=o,n=y(()=>e.playerData.stats.heroLevel+e.playerData.stats.itemsPower);return(t,s)=>(i(),u("div",F,[r("div",N,l(e.playerData.username),1),r("div",I,[r("div",H,l(a(n)),1),r("div",V,l(e.playerData.stats.heroLevel),1),r("div",E,l(e.playerData.stats.itemsPower),1)])]))}});const j={class:"players-list"},q={class:"list"},T=p({__name:"PlayersList",setup(o){const e=v(new Map);let n;return h(()=>{n=new EventSource("http://127.0.0.1:3000/sse"),n.onopen=()=>{console.info("SSE Connected")},n.onerror=()=>{console.error("Panik")},n.onmessage=t=>{const[s,_]=C(()=>JSON.parse(t.data));if(_&&console.info(t.data),s)for(const d of s)e.value.set(d.username,d)}}),w(()=>{n.close()}),(t,s)=>(i(),u("div",j,[r("ul",q,[(i(!0),u(b,null,x(e.value,(_,d)=>(i(),u("li",{key:d,class:"list__list-item"},[c(M,{"player-data":_[1]},null,8,["player-data"])]))),128))])]))}});const U={class:"hero"},A=p({__name:"Hero",setup(o){const e=P();return(n,t)=>(i(),u("div",U,[c(T),c(S,{"full-power":a(e).fullPower},null,8,["full-power"]),c(f,{title:"Level","starting-value":a(e).heroLevel,onIncrement:t[0]||(t[0]=s=>a(e).incrementHeroLevel()),onDecrement:t[1]||(t[1]=s=>a(e).decrementHeroLevel())},null,8,["starting-value"]),c(f,{title:"Bonus","starting-value":a(e).itemsPower,onIncrement:t[2]||(t[2]=s=>a(e).incrementItemsPower()),onDecrement:t[3]||(t[3]=s=>a(e).decrementItemsPower())},null,8,["starting-value"])]))}});export{A as default};
